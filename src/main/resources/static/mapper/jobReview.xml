<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.codepresso.cheerup.dao.RecruitReviewMapper">
    <select id="getAllRecruitReview" parameterType="Integer" resultType="RecruitReview">
        select * from recruitment_review
        order by boardNo desc
            limit #{startIndex}, #{pageSize}
    </select>

    <select id="getOneRecruitReview" parameterType="Integer" resultType="RecruitReview">
        select * from recruitment_review where boardNo = #{boardNo}
    </select>

    <select id="findAllCnt" resultType="_int">
        select count(*) from recruitment_review
    </select>

    <select id="findSearchCnt" parameterType="RecruitReview" resultType="_int">
        select count(*) from recruitment_review
            where
            (title like CONCAT('%',#{searchKeyword},'%') or content like CONCAT('%',#{searchKeyword},'%'))
            <if test='!category.equals("9999")'>
                and category = #{category}
            </if>
    </select>

    <select id="getSearchRecruitReview" parameterType="RecruitReview" resultType="RecruitReview">
        select * from recruitment_review
                 where
                    (title like CONCAT('%',#{searchKeyword},'%') or content like CONCAT('%',#{searchKeyword},'%'))
                    <if test='!category.equals("9999")'>
                        and category = #{category}
                    </if>
        order by boardNo desc
        limit #{startIndex}, #{pageSize}
    </select>

    <insert id="enrollReview" parameterType="RecruitReview">
        insert into recruitment_review(title,content,category,writeId,regdate,company,codingDiff) values
        (#{title}, #{content}, #{category}, #{writeId}, now(),  #{company}, #{codingDiff});
    </insert>

    <update id="updateReview" parameterType="RecruitReview">
        update recruitment_review set title = #{title}, content = #{content}, category = #{category}, company = #{company},codingDiff = #{codingDiff} where boardNo = #{boardNo}
    </update>

    <delete id="deleteReview" parameterType="Integer">
        delete from recruitment_review where boardNo=#{boardNo}
    </delete>
</mapper>